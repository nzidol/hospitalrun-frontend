#%RAML 1.0
title: HospitalRun FHIR API
version: v1
baseUri: http://localhost:8081/hr-fhir-api
mediaType: [application/xml+fhir, application/json+fhir]

types:
  #Primitives
  id:
    type: string
    #pattern: ^[A-Za-z0-9\-\.]{1,64}$
    description: |
      Any combination of upper or lower case ASCII letters ('A'..'Z', and 'a'..'z', numerals ('0'..'9'), '-' and '.', with a length limit of 64 characters.
      (This might be an integer, an un-prefixed OID, UUID or any other identifier pattern that meets these constraints.)
  base64Binary: string
  code:
    type: string
    #pattern: [^\s]+([\s]+[^\s]+)*
    description: |
      Indicates that the value is taken from a set of controlled strings defined elsewhere (see Using codes for further discussion). Technically, a code is restricted to a string which has at least one character and no leading or trailing whitespace, and where there is no whitespace other than single spaces in the contents
  date:
    type: string
    pattern: ^[0-9]{4}(-(0[1-9]|1[0-2])(-(0[0-9]|[1-2][0-9]|3[0-1]))?)?$
    example: 1970-08-07
  dateTime:
    type: string
    pattern: ^[0-9]{4}(-(0[1-9]|1[0-2])(-(0[0-9]|[1-2][0-9]|3[0-1])(T([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00)))?)?)?$
  decimal:
    type: number
    description: |
      A JSON number, except that exponents are not allowed or xs:decimal, except that decimals may not use exponents, and leading 0 digits are not allowed
  gender:
    type: string
    enum: [male, female, other, unknown]
  instant:
    type: string
    pattern: ^[0-9]{4}(-(0[1-9]|1[0-2])(-(0[0-9]|[1-2][0-9]|3[0-1])(T([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00)))))$
  markdown:
    type: string
    description: A string that may contain markdown syntax for optional processing by a markdown presentation engine
  ObservationRelationshipType:
    type: code
    enum: [has-member, derived-from, sequel-to, replaces, qualified-by, interfered-by]
  EncounterState:
    type: code
    enum: [planned, arrived, in-progress, onleave, finished, cancelled]
  ObservationCode:
    type: code
    description: https://www.hl7.org/fhir/valueset-observation-codes.html
  ObservationStatus:
    type: code
    enum: [registered, preliminary, final, ammended, cancelled, entered-in-error, unknown]
  positiveInt:
    type: integer
    minimum: 0
  resourceName:
    type: string
  time:
    type: string
    pattern: ^([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?$
  UnitOfTime:
    description: A unit of time (UCUM)
    type: code
    enum: [s, min, h, d, wk, mo, a]
  unsignedInt:
    type: integer
    minimum: 0
  uri:
    type: string
    #pattern: /^([a-z0-9+.-]+):(?://(?:((?:[a-z0-9-._~!$&'()*+,;=:]|%[0-9A-F]{2})*)@)?((?:[a-z0-9-._~!$&'()*+,;=]|%[0-9A-F]{2})*)(?::(\d*))?(/(?:[a-z0-9-._~!$&'()*+,;=:@/]|%[0-9A-F]{2})*)?|(/?(?:[a-z0-9-._~!$&'()*+,;=:@]|%[0-9A-F]{2})+(?:[a-z0-9-._~!$&'()*+,;=:@/]|%[0-9A-F]{2})*)?)(?:\?((?:[a-z0-9-._~!$&'()*+,;=:/?@]|%[0-9A-F]{2})*))?(?:#((?:[a-z0-9-._~!$&'()*+,;=:/?@]|%[0-9A-F]{2})*))?$/i/
  xhtml:
    type: string
    description: A string that may contain XHTML syntax for optional processing

  #Elements
  Extension:
    properties:
      url: uri
  Element:
    properties:
      id?: id
      extension?: Extension[]
  Address:
    type: Element
    properties:
      use?:
        type: code
        enum: [home, work, temp, old]
      type?:
        type: code
        enum: [postal, physical, both]
      text?: string
      line?: string[]
      city?: string
      district?: string
      state?: string
      postalCode?: string
      country?: string
      period?: Period
  Age: Quantity
  Annotation:
    type: Element
    properties:
      author: Reference | string
      time?: dateTime
      text?: string
  Attachment:
    type: Element
    properties:
      contentType?:
        type: code
        description: Mime type of the content, with charset etc.
      language?:
        type: code
        description: Human language of the content (BCP-47)
      data?: base64Binary
      url?: uri
      size?: unsignedInt
      hash?: base64Binary
      title?: string
      creation?: dateTime
  BackboneElement:
    type: Element
    properties:
      modifierExtension?: Extension
  Coding:
    properties:
      system?: uri
      version?: string
      code?: code
      display?: string
      userSelected?: boolean
  CodeableConcept:
    type: Element
    properties:
      coding?: Coding[]
      text?: string
  Conformance:
    type: DomainResource
    properties:
      url?: uri
      version?:
      name?:
      status?:
        type: code
        enum: [draft, active, retired]
      experimental?: boolean
      publisher?:
      contact?:
        type: array
        items:
          type: BackboneElement
          properties:
            name?:
            telecom?: ContactPoint[]
      date: dateTime
      description?:
      requirements?:
      copyright?:
      kind:
        type: code
        enum: [instance, capability, requirements]
      software?:
        type: BackboneElement
        properties:
          name:
          version?:
          releaseDate?: dateTime
      implementation?:
        type: BackboneElement
        properties:
          description:
          url?: uri
      fhirVersion: id
      acceptUnknown:
        type: code
        enum: [no, extensions, elements, both ]
      format:
        type: array
        items:
          type: code
          enum: [xml, json, application/xml, application/json]
      profile?: Reference[]
      rest?:
        type: array
        items:
          type: BackboneElement
          properties:
            mode:
              type: code
              enum: [client, server]
            documentation?:
            security?:
              type: BackboneElement
              properties:
                cors?: boolean
                service?: CodeableConcept[]
                description?:
                certificate?:
                  type: array
                  items:
                    type: BackboneElement
                    properties:
                      type?: code
                      blob?: base64Binary
            resource:
              type: array
              items:
                type: BackboneElement
                properties:
                  type:
                    type: code
                    enum: [] #Resource Type list TODO:
                  profile?: Reference
                  interaction:
                    type: array
                    items:
                      type: BackboneElement
                      properties:
                        code:
                          type: code
                          enum: [read, vread, update, delete, history-instance, validate, history-type, create, search-type]
                        documentation?:
                  versioning?:
                    type: code
                    enum: [no-version, versioned, versioned-update]
                  readHistory?: boolean
                  updateCreate?: boolean
                  conditionalCreate?: boolean
                  conditionalUpdate?: boolean
                  coditionalDelete?:
                    type: code
                    enum: [not-supported, single, multiple]
                  searchInclude?:
                  searchRevInclude?:
                  searchParam?:
                    type: array
                    items:
                      type: BackboneElement
                      properties:
                        name:
                        definition?:
                        type:
                          type: code
                          enum: [number, date, string, token, reference, composite, quantity, uri]
                        documentation?:
                        target?:
                          type: array
                          items:
                            type: code
                            enum: [missing, exact, contains, not, text, in, not-in, below, above, type]
                        chain?: string[]
            interaction?:
              type: array
              items:
                type: BackboneElement
                properties:
                  code:
                    type: code
                    enum: [transaction, search-system, history-system]
                  documentation?:
            transactionMode?:
              type: code
              enum: [not-supported, batch, transaction, both]
            searchParam?:
              type: array
              items:
                type: BackboneElement
                properties:
                  name:
                  definition?:
                  type:
                    type: code
                    enum: [number, date, string, token, reference, composite, quantity, uri]
                  documentation?:
                  target?:
                    type: array
                    items:
                      type: code
                      enum: [missing, exact, contains, not, text, in, not-in, below, above, type]
                  chain?: string[]
            operation?:
              type: array
              items:
                type: BackboneElement
                properties:
                  name:
                  definition:
            compartment?: uri[]
      messaging?:
        type: array
        items:
          type: BackboneElement
          properties:
            endpoint?:
              type: array
              items:
                type: BackboneElement
                properties:
                  protocol: Coding
                  address: uri
            reliableCache?: unsignedInt
            documentation: string
            event:
              type: array
              items:
                type: BackboneElement
                properties:
                  code: Coding
                  category?:
                    type: code
                    enum: [Consequence, Currency, Notification]
                  mode:
                    type: code
                    enum: [sender, receiver]
                  focus:
                    type: code
                    enum: [] #TODO: Resource Type
                  request: Reference
                  response: Reference
                  documentation?:
      document?:
        type: array
        items:
          type: BackboneElement
          properties:
            mode:
              type: code
              enum: [producer, consumer]
            docuemntation?:
            profile:
  ContactPoint:
    type: Element
    properties:
      system?:
        enum: [phone,fax,email,pager,other]
      value?: string
      use?: string
      rank?:
        type: positiveInt
      period?: Period
  Duration:
    type: Quantity
    description: a length of time
  HumanName:
    type: Element
    properties:
      use?:
        type: code
        enum: [usual, official ,temp, nickname, anonymous, old, maiden]
      text?:
      family?: string[]
      given?: string[]
      prefix?: string[]
      suffix?: string[]
      period?: Period
  Identifier:
    properties:
      use?: code
      type?: CodeableConcept
      system?: uri
      value?: string
      period?: Period
      assigner?: Reference
  Meta:
    type: Element
    properties:
      versionId?: id
      lastUpdated?: instant
      profile?: uri
      security?: Coding[]
      tag?: Coding[]
  Narrative:
    properties:
      status: code
      div: xhtml
  Period:
    type: Element
    properties:
      start?: dateTime
      end?: dateTime
  Quantity:
    type: Element
    properties:
      value?: decimal
      comparator?:
        type: code
        enum: ['<', '<=', '>=', '>']
      unit?: string
      system?: uri
      code?: code
  Range:
    type: Element
    properties:
      low?: integer
      high?: integer
  Ratio:
    type: Element
    properties:
      numerator?: Quantity
      denominator?: Quantity
  Reference:
    type: Element
    properties:
      reference?: string
      display?: string
  SampledData:
    description: A series of measurements taken by a device
    type: Element
    properties:
      origin: SimpleQuantity
      period: decimal
      factor?: decimal
      lowerLimit?: decimal
      upperLimit?: decimal
      dimensions: positiveInt
      data: string
  Signature:
    properties:
      type: Coding[]
      when: instant
      who: uri | Reference
      contentType: code
      blob: base64Binary
  SimpleQuantity: Quantity
  Timing:
    type: Element
    properties:
      event?: dateTime[]
      repeat?:
        type: Element
        properties:
          bounds: Duration | Range | Period
          count?: integer
          duration?: decimal
          durationMax?: decimal
          durationUnits?: UnitOfTime
          frequency?: integer
          frequencyMax?: integer
          period?: decimal
          periodMax?: decimal
          periodUnits?: UnitOfTime
          when?:
            type: code
            enum: [HS, WAKE, C, CM, CD, CV, AC, ACM, ACD, ACV, PC, PCM, PCD, PCV]
      code?: CodeableConcept

  #Resources
  Resource:
    properties:
      id?: id
      meta?: Meta
      implicitRules?: uri
      language?: code
  DomainResource:
    type: Resource
    properties:
      #where is resourceType defined in the spec?
      resourceType: string
      text?:
        type: Narrative
      contained?: Resource[]
      extension?: Extension[]
      modifierExtension?: Extension[]
  Appointment:
    description: |
      A booking of a healthcare event among patient(s), practitioner(s), related person(s) and/or device(s) for a specific date/time. This may result in one or more Encounter(s)
      Only proposed or cancelled appointments can be missing start/end dates
      Either start and end are specified, or neither
    type: DomainResource
    properties:
      identifier?: Identifier[]
      status:
        type: code
        enum: [proposed, pending, booked, arrived, fulfilled, cancelled, noshow]
      type?: CodeableConcept
      reason?: CodeableConcept
      priority?: unsignedInt
      description?: string
      start?: instant
      end?: instant
      minutesDuration?: positiveInt
      slot?: Reference[]
      comment?: string
      participant:
        type: array
        minItems: 1
        items:
          type: BackboneElement
          properties:
            type?: CodeableConcept
            actor?: Reference
            required?:
              type: code
              enum: [required, optional, information-only]
            status:
              type: code
              enum: [accepted, declined, tentative, needs-action]
  AllergyIntolerance:
    type: DomainResource
    properties:
      identifier?: Identifier[]
      onset?: dateTime
      recordedDate?: dateTime
      recorder?: Reference
      patient: Reference
      reporter?: Reference
      substance: CodeableConcept
      status?:
        type: code
        enum: [active, unconfirmed, confirmed, inactive, resolved, refuted, entered-in-error]
      criticality?:
        type: code
        enum: [CRITL, CRITH, CRITU]
      type?:
        type: code
        enum: [allergy, intolerance]
      category?:
        type: code
        enum: [food, medication, environment, other]
      lastOccurence?: dateTime
      note?: Annotation
      reaction?:
        type: array
        items:
          type: BackboneElement
          properties:
            substance?: CodeableConcept
            certainty?:
              type: code
              enum: [unlikely, likely, confirmed]
            manifestation:
              type: array
              minItems: 1
              items:
                type: CodeableConcept
            description?: string
            onset?: dateTime
            severity?:
              type: code
              enum: [mild, moderate, severe]
            exposureRoute?: CodeableConcept
            note?: Annotation
  Condition:
    type: DomainResource
    properties:
      identifier?: Identifier[]
      patient: Reference
      encounter?: Reference
      asserter?: Reference
      dateRecorded?: date
      code: CodeableConcept
      category?: CodeableConcept
      clinicalStatus?:
        type: code
        enum: [active, relapse, remission, resolved]
      verificationStatus:
        type: code
        enum: [provisional, differential, confirmed, refuted, entered-in-error, unknown]
      severity?: CodeableConcept
      onset?: dateTime | Age | Period | Range | string
      abatement?: dateTime | Age | boolean | Range | string
      stage?:
        type: BackboneElement
        properties:
          summary?: CodeableConcept
          asessment?: Reference[]
      evidence?:
        type: array
        items:
          type: BackboneElement
          properties:
            code?: CodeableConcept
            detail?: Reference[]
      bodySite?: CodeableConcept[]
      notes?:
  MedicationOrder:
    type: DomainResource
    properties:
      identifier?: Identifier[]
      dateWritten?: dateTime
      status?:
        type: code
        enum: [active, on-hold, completed, entered-in-error, stopped, draft]
      dateEnded?: dateTime
      reasonEnded?: CodeableConcept
      patient?: Reference
      prescriber?: Reference
      encounter?: Reference
      reason: CodeableConcept | Reference
      note?: string
      medication: CodeableConcept | string
      dosageInstruction?:
        type: array
        items:
          type: BackboneElement
          properties:
            text?:
            additionalInstructions?: CodeableConcept
            timing?: Timing
            asNeeded?: boolean | CodeableConcept
            site?: CodeableConcept | Reference
            route?: CodeableConcept
            method?: CodeableConcept
            dose?: Range | Quantity
            rate?: Ratio | Range
            maxDosePerPeriod?: Ratio
      dispenseRequest?:
        type: BackboneElement
        properties:
          medication: CodeableConcept | Reference
          validityPeriod?: Period
          numberOfRepeatsAllowed?: positiveInt
          quantity?: SimpleQuantity
          expectedSupplyDuration?: Duration
      substitution?:
        type: BackboneElement
        properties:
          type?: CodeableConcept
          reason?: CodeableConcept
      priorPrescription?: Reference
  Observation:
    type: DomainResource
    properties:
      identifier?: Identifier[]
      status: ObservationStatus
      category?: CodeableConcept
      code: CodeableConcept
      subject?: Reference
      encounter?: Reference
      effective?: dateTime | Period
      issued?: instant
      performer?: Reference[]
      value?: Quantity | CodeableConcept | string | Range | Ratio | SampledData | Attachment |  time | dateTime | Period
      dataAbsentReason?: CodeableConcept
      interpretation?: CodeableConcept
      comments?: string
      bodySite?: CodeableConcept
      method?: CodeableConcept
      specimen?: Reference
      device?: Reference
      referenceRange?:
        type: array
        items:
          type: BackboneElement
          properties:
            low?: SimpleQuantity
            high?: SimpleQuantity
            meaning?: CodeableConcept
            age?: Range
            text?: string
      related?:
        type: array
        items:
          type: BackboneElement
          properties:
            type?: ObservationRelationshipType
            target: Reference
      component?:
        type: array
        items:
          type: BackboneElement
          properties:
            code?: Quantity | CodeableConcept | string | Range | Ratio | SampledData | Attachment | time | dateTime | Period
            dataAbsentReason?: CodeableConcept
            referenceRange?:
              type: array
              items:
                type: BackboneElement
                properties:
                  low?: SimpleQuantity
                  high?: SimpleQuantity
                  meaning?: CodeableConcept
                  age?: Range
                  text?: string
  Patient:
    description: Information about an individual or animal receiving health care services
    type: DomainResource
    properties:
      identifier?: Identifier[]
      active?:
        type: boolean
        description: Whether this patient's record is in active use
      name?: HumanName[]
      telecom?: ContactPoint[]
      gender?: gender
      birthDate?: boolean | dateTime
      address?: Address[]
      maritalStatus?: boolean | integer
      photo?: Attachment[]
      contact?:
        description: |
          A contact party (e.g. guardian, partner, friend) for the patient
          SHALL at least contain a contact's details or a reference to an organization
        type: array
        items:
          type: BackboneElement
          properties:
            relationship?: CodeableConcept[]
            name?: HumanName
            telecom?: ContactPoint[]
            address?: Address
            gender?: gender
            organization?: Reference
            period?:
              description: |
                The period during which this contact person or organization is valid to be contacted relating to this patient
              type: Period
      animal?:
        description: This patient is known to be an animal (non-human)
        type: BackboneElement
        properties:
          species: CodeableConcept
          breed?: CodeableConcept
          genderStatus?: CodeableConcept
      communication?:
        description: |
          A list of Languages which may be used to communicate with the patient about his or her health
        type: array
        items:
          type: BackboneElement
          properties:
            language: CodeableConcept
            preferred?: boolean
      careProvider?: Reference[]
      managingOrganization?:
        description: Organization that is the custodian of the patient record
        type: Reference
      link?:
        description: Link to another patient resource that concerns the same actual person
        type: BackboneElement
        properties:
          other: Reference
          type:
            type: code
            enum: [replace, refer, seealso]

  #Entries
  Entry:
    type: BackboneElement
    properties:
      link?:
        type: array
        items:
          type: BackboneElement
          properties:
            relation: string
            url: uri
      fullUrl?: uri
      search?:
        type: BackboneElement
        properties:
          mode?:
            type: code
            enum: [match, include, outcome]
          score?: decimal
      request?:
        type: BackboneElement
        properties:
          method:
            type: code
            enum: [GET, PUT, POST, DELETE]
          url: uri
          ifNoneMatch?: string
          ifModifiedSince?: instant
          ifMatch: string
          ifNoneExist: string
      response?:
        type: object
        properties:
          status: string
          location?: uri
          etag?: string
          lastModified?: instant
  #not to be used directly - use more specific types: <resourceName>Entry
  AppointmentEntry:
    type: Entry
    properties:
      resource?: Appointment
  AllergyIntoleranceEntry:
    type: Entry
    properties:
      resource?: AllergyIntolerance
  ConditionEntry:
    type: Entry
    properties:
      resource?: Condition
  MedicationOrderEntry:
    type: Entry
    properties:
      resource?: MedicationOrder
  ObservationEntry:
    type: Entry
    properties:
      resource?: Observation
  PatientEntry:
    type: Entry
    properties:
      resource?: Patient

  #Bundles
  Bundle:
    type: Resource
    properties:
      resourceType?: string
      type:
        type: code
        enum: [document, message, transaction,  transaction-response, batch, batch-response,  history, searchset, collection]
      total?: unsignedInt
      link?:
        type: array
        items:
          type: BackboneElement
          properties:
            relation: string
            url: uri
      signature?: Signature
  #not to be used directly - use more specific types: GeneralBundle or <resourceName>Bundle
  AppointmentBundle:
    type: Bundle
    properties:
      entry?: AppointmentEntry[]
  AllergyIntoleranceBundle:
    type: Bundle
    properties:
      entry?: AllergyIntoleranceEntry[]
  ConditionBundle:
    type: Bundle
    properties:
      entry?: ConditionEntry[]
  MedicationOrderBundle:
    type: Bundle
    properties:
      entry?: MedicationOrderEntry[]
  ObservationBundle:
    type: Bundle
    properties:
      entry?: ObservationEntry[]
  PatientBundle:
    type: Bundle
    properties:
      entry?: PatientEntry[]

resourceTypes:
  fhirResourceType:
      post:
        description: |
          The create interaction creates a new resource in a server-assigned location.
          If the client wishes to have control over the id of a newly submitted resource, it should use the update interaction instead.
        is: [create]
        headers:
          If-None-Exist:
            required: false
            description: name=value selective criteria
        body:
          application/json:
            type: <<resourcePathName>>
            example: <<postExample>>
        responses:
          200:
            description: No match, resource created.
          412:
            description: Precondition Failed error indicating the client's criteria were not selective enough.
      get:
        description: This interaction searches a set of resources based on some filter criteria.
        is: [search]
        responses:
          200:
            body:
              application/json:
                type: <<resourcePathName>>Bundle
                example: <<getExample>>
      put:
        description: The conditional update interaction allows a client to update an existing resource based on some identification criteria, rather than by logical id.
        is: [update, conditionalOperation]
        queryParameters:
        responses:
          412:
            description: |
              Precondition Failed error indicating the client's criteria were not selective enough
      delete:
        description: The conditional delete interaction allows a client to delete an existing resource based on some selection criteria, rather than by a specific logical id.
        is: [delete, conditionalOperation]
        queryParameters:
        responses:
          404:
            description: Not found
          412:
            description: Precondition Failed error indicating the client's criteria were not selective enough.
  fhirResource:
    get:
      description: The read interaction accesses the current contents of a resource.
      is: [read]
      responses:
        200:
          body:
            application/json:
              type: <<resourcePathName>>
              example: <<getSingleExample>>
    put:
      description: The update interaction creates a new current version for an existing resource or creates an initial version if no resource already exists for the given id.
      is: [update]
      body:
        application/json:
          type: <<resourcePathName>>
          example: <<putExample>>
    delete:
      description: The delete interaction removes an existing resource.
      is: [delete]
  fhirCompartment:
      get:
        is: [search]
        responses:
          200:
            body:
              application/json:
                type: <<resourcePathName>>Bundle
                example: <<example>>
  fhirSearch:
      post:
        description: This interaction searches a set of resources based on some filter criteria.
        body:
          application/x-www-form-urlencoded:
            properties:
              #parameters for all resources
              _id:
                required: false
                description: Resource id (not a full URL)
              _content:
                required: false
                description: Text search against the entire resource
              _lastUpdated:
                required: false
                description: Date last updated. Server has discretion on the boundary precision
              _tag:
                required: false
                description: Search by a resource tag
              _profile:
                required: false
                description: Search for all resources tagged with a profile
              _security:
                required: false
                description: Search by a security label
              _text:
                required: false
                description: Text search against the narrative
              _list:
                required: false
                description: All resources in nominated list (by id, not a full URL)
              _query:
                required: false
                description: Custom named query
              #search result parameters
              _sort:
                required: false
                description: Order to sort results in (can repeat for inner sort orders)
              _count:
                required: false
                description: Number of results per page
              _include:
                required: false
                description: Other resources to include in the search results that search matches point to
              _revinclude:
                required: false
                description: Other resources to include in the search results when they refer to search matches
              _summary:
                required: false
                description: Just return the summary elements (for resources where this is defined)
              _contained:
                required: false
                description: Whether to return resources contained in other resources in the search matches
              _containedType:
                required: false
                description: If returning contained resources, whether to return the contained or container resources
        responses:
          200:
            body:
              application/json:
                type: <<bundleName>>
      get:
        description: This interaction searches a set of resources based on some filter criteria.
        #is: [{search: { bundleName: <<bundleName>>}}]
        #is: [search]
        responses:
          200:
            body:
              application/json:
                type: <<bundleName>>
  fhirVersionedResource:
    get:
      description: The vread interaction preforms a version specific read of the resource.
      is: [vread: { resourceName: <<resourceName>> }]
  fhirHistory:
      get:
        description: The history interaction retrieves the history of either a particular resource or all resources of a given type.
        is: [{history: { bundleName: <<bundleName>>}}]

traits:
  vread:
      queryParameters:
        _format:
          required: false
          enum: [application/json, application/xml]
      responses:
        200:
          headers:
            ETag:
            Last-Modified: instant
          body:
            application/json:
              type: <<resourceName>>
  read:
    queryParameters:
      _format:
        required: false
        enum: [application/json, application/xml]
      _summary:
        required: false
        enum: ['true', 'false', text, data]
    headers:
      If-Modified-Since:
        type: instant
        required: false
      If-None-Match:
        required: false
    responses:
      304:
        description: Not Modified
  update:
    responses:
      200:
        description: Updated
      201:
        description: Created
        headers:
          Location:
            example: http://xxx/condidition/123/_history/1
          Last-Modified: datetime
          ETag:
            example: '1.0'
      422:
        description: |
          Unprocessable Entity - the proposed resource violated applicable FHIR profiles or server business rules
  delete:
    responses:
      204:
        description: Deleted
  create:
    responses:
      201:
        description: Created
        headers:
          Location:
            example: http://xxx/Condidition/123/_history/1
          Last-Modified: datetime
          ETag:
            example: '1.0'
  search:
    queryParameters:
      #parameters for all resources
      _id:
        required: false
        description: Resource id (not a full URL)
      _content:
        required: false
        description: Text search against the entire resource
      _lastUpdated:
        required: false
        description: Date last updated. Server has discretion on the boundary precision
      _tag:
        required: false
        description: Search by a resource tag
      _profile:
        required: false
        description: Search for all resources tagged with a profile
      _security:
        required: false
        description: Search by a security label
      _text:
        required: false
        description: Text search against the narrative
      _list:
        required: false
        description: All resources in nominated list (by id, not a full URL)
      _query:
        required: false
        description: Custom named query
      #search result parameters
      _sort:
        required: false
        description: Order to sort results in (can repeat for inner sort orders)
      _count:
        required: false
        description: Number of results per page
      _include:
        required: false
        description: Other resources to include in the search results that search matches point to
      _revinclude:
        required: false
        description: Other resources to include in the search results when they refer to search matches
      _summary:
        required: false
        description: Just return the summary elements (for resources where this is defined)
      _contained:
        required: false
        description: Whether to return resources contained in other resources in the search matches
      _containedType:
        required: false
        description: If returning contained resources, whether to return the contained or container resources
  conformance:
    responses:
      200:
        body:
          application/json:
            type: Conformance
          application/xml:
            type: Conformance
  history:
    queryParameters:
      _count:
        required: false
      _since:
        required: false
    responses:
      200:
        body:
          application/json:
            type: <<bundleName>>
  conditionalOperation:
    queryParameters:
      #parameters for all resources
      _id:
        required: false
        description: Resource id (not a full URL)
      _content:
        required: false
        description: Text search against the entire resource
      _lastUpdated:
        required: false
        description: Date last updated. Server has discretion on the boundary precision
      _tag:
        required: false
        description: Search by a resource tag
      _profile:
        required: false
        description: Search for all resources tagged with a profile
      _security:
        required: false
        description: Search by a security label
      _text:
        required: false
        description: Text search against the narrative
      _list:
        required: false
        description: All resources in nominated list (by id, not a full URL)
      _query:
        required: false

  #resource specific
  allergyIntoleranceSearch:
    queryParameters:
      category:
        required: false
        description: food | medication | environment | other - Category of Substance
      criticality:
        required: false
        description: CRITL | CRITH | CRITU
      date:
        required: false
        description: When recorded
      identifier:
        type: string|integer
        required: false
        description: External ids for this item
      last-date:
        required: false
        description: Date(/time) of last known occurrence of a reaction
      manifestation:
        required: false
        description: Clinical symptoms/signs associated with the Event
      onset:
        required: false
        description: Date(/time) when manifestations showed
      patient:
        required: false
        description: Who the sensitivity is for
      recorder:
        required: false
        description: Who recorded the sensitivity
      reporter:
        required: false
        description: Source of the information about the allergy
      route:
        required: false
        description: How the subject was exposed to the substance
      severity:
        required: false
        description: mild | moderate | severe (of event as a whole)
      status:
        required: false
        description: active | unconfirmed | confirmed | inactive | resolved | refuted | entered-in-error
      substance:
        required: false
        description: Substance, (or class) considered to be responsible for risk
      type:
        required: false
        description: allergy | intolerance - Underlying mechanism (if known)
  appointmentSearch:
    queryParameters:
      actor:
        required: false
        description: Any one of the individuals participating in the appointment
      date:
        required: false
        description: Appointment date/time
      identifier:
        type: string|integer
        required: false
        description: An Identifier of the Appointment
      location:
        required: false
        description: |
          The Participation status of the subject, or other participant on the appointment. Can be used to locate participants that have not responded to meeting requests.
      patient:
        required: false
        description: One of the individuals of the appointment is this patient
      practitioner:
        required: false
        description: One of the individuals of the appointment is this practitioner
      status:
        required: false
        description: The overall status of the appointment
  conditionSearch:
    queryParameters:
      asserter:
        required: false
        description: Person who asserts this condition
      body-site:
        required: false
        description: Anatomical location, if relevant
      category:
        required: false
        description: The category of the condition
      clinicalstatus:
        required: false
        description: The clinical status of the condition
      code:
        type: integer
        required: false
        description: Code for the condition
      date-recorded:
        required: false
        description:  A date, when the Condition statement was documented
      encounter:
        required: false
        description: Encounter when condition first asserted
      evidence:
        required: false
        description: Manifestation/symptom
      identifier:
        type: string|integer
        required: false
        description: A unique identifier of the condition record
      onset:
        required: false
        description: Date related onsets (dateTime and Period)
      onset-info:
        required: false
        description: Other onsets (boolean, age, range, string)
      patient:
        required: false
        description: Who has the condition?
      severity:
        required: false
        description: The severity of the condition
      stage:
        required: false
        description: Simple summary (disease specific)
  deviceSearch:
    queryParameters:
      identifier:
        type: string|integer
        required: false
        description: Instance id from manufacturer, owner, and others
      location:
        required: false
        description: A location, where the resource is found
      manufacturer:
        required: false
        description: The manufacturer of the device
      model:
        required: false
        description: The model of the device
      organization:
        required: false
        description: The organization responsible for the device
      patient:
        required: false
        description: Patient information, if the resource is affixed to a person
      type:
        required: false
        description: The type of the device
      udi:
        required: false
        description: FDA mandated Unique Device Identifier
      url:
        required: false
        description: Network address to contact device
  encounterSearch:
    queryParameters:
      appointment:
        required: false
        description: The appointment that scheduled this encounter
      condition:
        required: false
        description: Reason the encounter takes place (resource)
      date:
        required: false
        description: A date within the period the Encounter lasted
      episodeofcare:
        required: false
        description: Episode(s) of care that this encounter should be recorded against
      identifier:
        type: string|integer
        required: false
        description: Identifier(s) by which this encounter is known
      incomingreferral:
        required: false
        description:  The ReferralRequest that initiated this encounter
      indication:
        required: false
        description: Reason the encounter takes place (resource)
      length:
        required: false
        description: Length of encounter in days
      location:
        required: false
        description: Location the encounter takes place
      location-period:
        required: false
        description: Time period during which the patient was present at the location
      part-of:
        required: false
        description: Another Encounter this encounter is part of
      participant:
        required: false
        description: Persons involved in the encounter other than the patient
      participant-type:
        required: false
        description: Role of participant in encounter
      patient:
        required: false
        description: The patient present at the encounter
      practitioner:
        required: false
        description: Persons involved in the encounter other than the patient
      procedure:
        required: false
        description: Reason the encounter takes place (resource)
      reason:
        required: false
        description: Reason the encounter takes place (code)
      special-arrangement:
        required: false
        description: Wheelchair, translator, stretcher, etc.
      status:
        required: false
        description: planned | arrived | in-progress | onleave | finished | cancelled
      type:
        required: false
        description: Specific type of encounter
  medicationSearch:
    queryParameters:
      code:
        required: false
        description: Codes that identify this medication
      container:
        required: false
        description: E.g. box, vial, blister-pack
      content:
        required: false
        description: A product in the package
      form:
        required: false
        description: powder | tablets | carton +
      ingredient:
        required: false
        description: The product contained
      manufacturer:
        required: false
        description: Manufacturer of the item
  medicationOrderSearch:
    queryParameters:
      code:
        required: false
        description: Return administrations of this medication code
      datewritten:
        required: false
        description: Return prescriptions written on this date
      encounter:
        required: false
        description: Return prescriptions with this encounter identifier
      identifier:
        type: string|integer
        required: false
        description: Return prescriptions with this external identifier
      medication:
        required: false
        description: Return administrations of this medication reference
      patient:
        required: false
        description: The identity of a patient to list orders for
      prescriber:
        required: false
        description: Who ordered the medication(s)
      status:
        required: false
  observationSearch:
    queryParameters:
      category:
        required: false
        description: The classification of the type of observation
      code:
        required: false
        description: The code of the observation type

      component-code:
        required: false
        description: The component code of the observation type

      component-data-absent-reason:
        required: false
        description: The reason why the expected value in the element Observation.component.value[x] is missing.
      component-value-concept:
        required: false
        description: The value of the component observation, if the value is a CodeableConcept
      component-value-quantity:
        required: false
        description: The value of the component observation, if the value is a Quantity, or a SampledData (just search on the bounds of the values in sampled data)
      component-value-string:
        required: false
        description: The value of the component observation, if the value is a string, and also searches in CodeableConcept.text
      data-absent-reason:
        required: false
        description: The reason why the expected value in the element Observation.value[x] is missing.
      date:
        required: false
        description: Obtained date/time. If the obtained element is a period, a date that falls in the period
      device:
        required: false
        description: The Device that generated the observation data.
      encounter:
        required: false
        description: Healthcare event related to the observation
      identifier:
        type: string|integer
        required: false
        description: The unique id for a particular observation
      patient:
        required: false
        description: The subject that the observation is about (if patient)
      performer:
        required: false
        description: Who performed the observation
      related:
        required: false
        description: Related Observations - search on related-type and related-target together
      related-target:
        required: false
        description: Resource that is related to this one
      related-type:
        required: false
        description: has-member | derived-from | sequel-to | replaces | qualified-by | interfered-by
      specimen:
        required: false
        description: Specimen used for this observation
      status:
        required: false
        description: The status of the observation
      subject:
        required: false
        description: The subject that the observation is about
      value-concept:
        required: false
        description: The value of the observation, if the value is a CodeableConcept
      value-date:
        required: false
        description: The value of the observation, if the value is a date or period of time
      value-quantity:
        required: false
        description: The value of the observation, if the value is a Quantity, or a SampledData (just search on the bounds of the values in sampled data)
      value-string:
        required: false
        description: The value of the observation, if the value is a string, and also searches in CodeableConcept.text
  patientSearch:
    queryParameters:
      active:
        required: false
        description: Whether the patient record is active
      address:
        required: false
        description: An address in any kind of address/part of the patient
      address-city:
        required: false
        description: A city specified in an address
      address-country:
        required: false
        description: A country specified in an address
      address-postalcode:
        required: false
        description: A postalCode specified in an address
      address-state:
        required: false
        description: A state specified in an address
      address-use:
        required: false
        description: A use code specified in an address
      animal-breed:
        required: false
        description: The breed for animal patients
      animal-species:
        required: false
        description: The species for animal patients
      birthdate:
        required: false
        description: The patient's date of birth
      careprovider:
        required: false
        description: Patient's nominated care provider, could be a care manager, not the organization that manages the record
      deathdate:
        required: false
        description: The date of death has been provided and satisfies this search value
      deceased:
        required: false
        description: This patient has been marked as deceased, or as a death date entered
      email:
        required: false
        description: A value in an email contact
      family:
        required: false
        description: A portion of the family name of the patient
      gender:
        required: false
        description: Gender of the patient
      given:
        required: false
        description: A portion of the given name of the patient
      identifier:
        type: string|integer
        required: false
        description: A patient identifier
      language:
        required: false
        description: Language code (irrespective of use value)
      link:
        required: false
        description: All patients linked to the given patient
      name:
        required: false
        description: A portion of either family or given name of the patient
      organization:
        required: false
        description: The organization at which this person is a patient
      phone:
        required: false
        description: A value in a phone contact
      phonetic:
        required: false
        description: A portion of either family or given name using some kind of phonetic matching algorithm
      telecom:
        required: false
        description: The value in any kind of telecom details of the patient
  practitionerSearch:
    queryParameters:
      address:
        required: false
        description: An address in any kind of address/part
      address-city:
        required: false
        description: A city specified in an address
      address-country:
        required: false
        description: A country specified in an address
      address-postalcode:
        required: false
        description: A postalCode specified in an address
      address-state:
        required: false
        description: A state specified in an address
      address-use:
        required: false
        description: A use code specified in an address
      communication:
        required: false
        description: One of the languages that the practitioner can communicate with
      email:
        required: false
        description: A value in an email contact
      family:
        required: false
        description: A portion of the family name of the practitioner
      gender:
        required: false
        description: Gender of the practitioner
      given:
        required: false
        description: A portion of the given name of the practitioner
      identifier:
        type: string|integer
        required: false
        description: A practitioner's identifier
      location:
        required: false
        description: One of the locations at which this practitioner provides care
      name:
        required: false
        description: A portion of either family or given name of the practitioner
      organization:
        required: false
        description: The identity of the organization the practitioner represents / acts on behalf of
      phone:
        required: false
        description: A value in a phone contact
      phonetic:
        required: false
        description: A portion of either family or given name using some kind of phonetic matching algorithm
      specialty:
        required: false
        description: The practitioner has this specialty at an organization
      telecom:
        required: false
        description: The value in any kind of contact
  scheduleSearch:
    queryParameters:
      actor:
        required: false
        description: The individual(HealthcareService, Practitioner, Location, ...) to find a Schedule for
      date:
        required: false
        description: Search for Schedule resources that have a period that contains this date specified
      identifier:
        type: string|integer
        required: false
        description: A Schedule Identifier
      type:
        required: false
        description: The type of appointments that can be booked into associated slot(s)
  slotSearch:
    queryParameters:
      fb-type:
        required: false
        description: The free/busy status of the appointment
      schedule:
        required: false
        description: The Schedule Resource that we are seeking a slot within
      identifier:
        type: string|integer
        required: false
        description: A Slot Identifier
      slot-type:
        required: false
        description: The type of appointments that can be booked into the slot
      start:
        required: false
        description: Appointment date/time

  #POST search - resource specific
  allergyIntolerancePOSTSearch:
    body:
      application/x-www-form-urlencoded:
        properties:
          category:
            required: false
            description: food | medication | environment | other - Category of Substance
          criticality:
            required: false
            description: CRITL | CRITH | CRITU
          date:
            required: false
            description: When recorded
          identifier:
            type: string|integer
            required: false
            description: External ids for this item
          last-date:
            required: false
            description: Date(/time) of last known occurrence of a reaction
          manifestation:
            required: false
            description: Clinical symptoms/signs associated with the Event
          onset:
            required: false
            description: Date(/time) when manifestations showed
          patient:
            required: false
            description: Who the sensitivity is for
          recorder:
            required: false
            description: Who recorded the sensitivity
          reporter:
            required: false
            description: Source of the information about the allergy
          route:
            required: false
            description: How the subject was exposed to the substance
          severity:
            required: false
            description: mild | moderate | severe (of event as a whole)
          status:
            required: false
            description: active | unconfirmed | confirmed | inactive | resolved | refuted | entered-in-error
          substance:
            required: false
            description: Substance, (or class) considered to be responsible for risk
          type:
            required: false
            description: allergy | intolerance - Underlying mechanism (if known)
  appointmentPOSTSearch:
    body:
      application/x-www-form-urlencoded:
        properties:
          actor:
            required: false
            description: Any one of the individuals participating in the appointment
          date:
            required: false
            description: Appointment date/time
          identifier:
            type: string|integer
            required: false
            description: An Identifier of the Appointment
          location:
            required: false
            description: |
              The Participation status of the subject, or other participant on the appointment. Can be used to locate participants that have not responded to meeting requests.
          patient:
            required: false
            description: One of the individuals of the appointment is this patient
          practitioner:
            required: false
            description: One of the individuals of the appointment is this practitioner
          status:
            required: false
            description: The overall status of the appointment
  conditionPOSTSearch:
    body:
      application/x-www-form-urlencoded:
        properties:
          asserter:
            required: false
            description: Person who asserts this condition
          body-site:
            required: false
            description: Anatomical location, if relevant
          category:
            required: false
            description: The category of the condition
          clinicalstatus:
            required: false
            description: The clinical status of the condition
          code:
            type: integer
            required: false
            description: Code for the condition
          date-recorded:
            required: false
            description:  A date, when the Condition statement was documented
          encounter:
            required: false
            description: Encounter when condition first asserted
          evidence:
            required: false
            description: Manifestation/symptom
          identifier:
            type: string|integer
            required: false
            description: A unique identifier of the condition record
          onset:
            required: false
            description: Date related onsets (dateTime and Period)
          onset-info:
            required: false
            description: Other onsets (boolean, age, range, string)
          patient:
            required: false
            description: Who has the condition?
          severity:
            required: false
            description: The severity of the condition
          stage:
            required: false
            description: Simple summary (disease specific)
  devicePOSTSearch:
    body:
      application/x-www-form-urlencoded:
        properties:
          identifier:
            type: string|integer
            required: false
            description: Instance id from manufacturer, owner, and others
          location:
            required: false
            description: A location, where the resource is found
          manufacturer:
            required: false
            description: The manufacturer of the device
          model:
            required: false
            description: The model of the device
          organization:
            required: false
            description: The organization responsible for the device
          patient:
            required: false
            description: Patient information, if the resource is affixed to a person
          type:
            required: false
            description: The type of the device
          udi:
            required: false
            description: FDA mandated Unique Device Identifier
          url:
            required: false
            description: Network address to contact device
  encounterPOSTSearch:
    body:
      application/x-www-form-urlencoded:
        properties:
          appointment:
            required: false
            description: The appointment that scheduled this encounter
          condition:
            required: false
            description: Reason the encounter takes place (resource)
          date:
            required: false
            description: A date within the period the Encounter lasted
          episodeofcare:
            required: false
            description: Episode(s) of care that this encounter should be recorded against
          identifier:
            type: string|integer
            required: false
            description: Identifier(s) by which this encounter is known
          incomingreferral:
            required: false
            description:  The ReferralRequest that initiated this encounter
          indication:
            required: false
            description: Reason the encounter takes place (resource)
          length:
            required: false
            description: Length of encounter in days
          location:
            required: false
            description: Location the encounter takes place
          location-period:
            required: false
            description: Time period during which the patient was present at the location
          part-of:
            required: false
            description: Another Encounter this encounter is part of
          participant:
            required: false
            description: Persons involved in the encounter other than the patient
          participant-type:
            required: false
            description: Role of participant in encounter
          patient:
            required: false
            description: The patient present at the encounter
          practitioner:
            required: false
            description: Persons involved in the encounter other than the patient
          procedure:
            required: false
            description: Reason the encounter takes place (resource)
          reason:
            required: false
            description: Reason the encounter takes place (code)
          special-arrangement:
            required: false
            description: Wheelchair, translator, stretcher, etc.
          status:
            required: false
            description: planned | arrived | in-progress | onleave | finished | cancelled
          type:
            required: false
            description: Specific type of encounter
  medicationPOSTSearch:
    body:
      application/x-www-form-urlencoded:
        properties:
          code:
            required: false
            description: Codes that identify this medication
          container:
            required: false
            description: E.g. box, vial, blister-pack
          content:
            required: false
            description: A product in the package
          form:
            required: false
            description: powder | tablets | carton +
          ingredient:
            required: false
            description: The product contained
          manufacturer:
            required: false
            description: Manufacturer of the item
  medicationOrderPOSTSearch:
    body:
      application/x-www-form-urlencoded:
        properties:
          code:
            required: false
            description: Return administrations of this medication code
          datewritten:
            required: false
            description: Return prescriptions written on this date
          encounter:
            required: false
            description: Return prescriptions with this encounter identifier
          identifier:
            type: string|integer
            required: false
            description: Return prescriptions with this external identifier
          medication:
            required: false
            description: Return administrations of this medication reference
          patient:
            required: false
            description: The identity of a patient to list orders for
          prescriber:
            required: false
            description: Who ordered the medication(s)
          status:
            required: false
  patientPOSTSearch:
    body:
      application/x-www-form-urlencoded:
        properties:
          active:
            required: false
            description: Whether the patient record is active
          address:
            required: false
            description: An address in any kind of address/part of the patient
          address-city:
            required: false
            description: A city specified in an address
          address-country:
            required: false
            description: A country specified in an address
          address-postalcode:
            required: false
            description: A postalCode specified in an address
          address-state:
            required: false
            description: A state specified in an address
          address-use:
            required: false
            description: A use code specified in an address
          animal-breed:
            required: false
            description: The breed for animal patients
          animal-species:
            required: false
            description: The species for animal patients
          birthdate:
            required: false
            description: The patient's date of birth
          careprovider:
            required: false
            description: Patient's nominated care provider, could be a care manager, not the organization that manages the record
          deathdate:
            required: false
            description: The date of death has been provided and satisfies this search value
          deceased:
            required: false
            description: This patient has been marked as deceased, or as a death date entered
          email:
            required: false
            description: A value in an email contact
          family:
            required: false
            description: A portion of the family name of the patient
          gender:
            required: false
            description: Gender of the patient
          given:
            required: false
            description: A portion of the given name of the patient
          identifier:
            type: string|integer
            required: false
            description: A patient identifier
          language:
            required: false
            description: Language code (irrespective of use value)
          link:
            required: false
            description: All patients linked to the given patient
          name:
            required: false
            description: A portion of either family or given name of the patient
          organization:
            required: false
            description: The organization at which this person is a patient
          phone:
            required: false
            description: A value in a phone contact
          phonetic:
            required: false
            description: A portion of either family or given name using some kind of phonetic matching algorithm
          telecom:
            required: false
            description: The value in any kind of telecom details of the patient

  observationPOSTSearch:
    body:
      application/x-www-form-urlencoded:
        properties:
          category:
            required: false
            description: The classification of the type of observation
          code:
            required: false
            description: The code of the observation type

          component-code:
            required: false
            description: The component code of the observation type

          component-data-absent-reason:
            required: false
            description: The reason why the expected value in the element Observation.component.value[x] is missing.
          component-value-concept:
            required: false
            description: The value of the component observation, if the value is a CodeableConcept
          component-value-quantity:
            required: false
            description: The value of the component observation, if the value is a Quantity, or a SampledData (just search on the bounds of the values in sampled data)
          component-value-string:
            required: false
            description: The value of the component observation, if the value is a string, and also searches in CodeableConcept.text
          data-absent-reason:
            required: false
            description: The reason why the expected value in the element Observation.value[x] is missing.
          date:
            required: false
            description: Obtained date/time. If the obtained element is a period, a date that falls in the period
          device:
            required: false
            description: The Device that generated the observation data.
          encounter:
            required: false
            description: Healthcare event related to the observation
          identifier:
            type: string|integer
            required: false
            description: The unique id for a particular observation
          patient:
            required: false
            description: The subject that the observation is about (if patient)
          performer:
            required: false
            description: Who performed the observation
          related:
            required: false
            description: Related Observations - search on related-type and related-target together
          related-target:
            required: false
            description: Resource that is related to this one
          related-type:
            required: false
            description: has-member | derived-from | sequel-to | replaces | qualified-by | interfered-by
          specimen:
            required: false
            description: Specimen used for this observation
          status:
            required: false
            description: The status of the observation
          subject:
            required: false
            description: The subject that the observation is about
          value-concept:
            required: false
            description: The value of the observation, if the value is a CodeableConcept
          value-date:
            required: false
            description: The value of the observation, if the value is a date or period of time
          value-quantity:
            required: false
            description: The value of the observation, if the value is a Quantity, or a SampledData (just search on the bounds of the values in sampled data)
          value-string:
            required: false
            description: The value of the observation, if the value is a string, and also searches in CodeableConcept.text
  practitionerPOSTSearch:
    body:
      application/x-www-form-urlencoded:
        properties:
          address:
            required: false
            description: An address in any kind of address/part
          address-city:
            required: false
            description: A city specified in an address
          address-country:
            required: false
            description: A country specified in an address
          address-postalcode:
            required: false
            description: A postalCode specified in an address
          address-state:
            required: false
            description: A state specified in an address
          address-use:
            required: false
            description: A use code specified in an address
          communication:
            required: false
            description: One of the languages that the practitioner can communicate with
          email:
            required: false
            description: A value in an email contact
          family:
            required: false
            description: A portion of the family name of the practitioner
          gender:
            required: false
            description: Gender of the practitioner
          given:
            required: false
            description: A portion of the given name of the practitioner
          identifier:
            type: string|integer
            required: false
            description: A practitioner's identifier
          location:
            required: false
            description: One of the locations at which this practitioner provides care
          name:
            required: false
            description: A portion of either family or given name of the practitioner
          organization:
            required: false
            description: The identity of the organization the practitioner represents / acts on behalf of
          phone:
            required: false
            description: A value in a phone contact
          phonetic:
            required: false
            description: A portion of either family or given name using some kind of phonetic matching algorithm
          specialty:
            required: false
            description: The practitioner has this specialty at an organization
          telecom:
            required: false
            description: The value in any kind of contact
  schedulePOSTSearch:
    body:
      application/x-www-form-urlencoded:
        properties:
          actor:
            required: false
            description: The individual(HealthcareService, Practitioner, Location, ...) to find a Schedule for
          date:
            required: false
            description: Search for Schedule resources that have a period that contains this date specified
          identifier:
            type: string|integer
            required: false
            description: A Schedule Identifier
          type:
            required: false
            description: The type of appointments that can be booked into associated slot(s)
  slotPOSTSearch:
    body:
      application/x-www-form-urlencoded:
        properties:
          fb-type:
            required: false
            description: The free/busy status of the appointment
          schedule:
            required: false
            description: The Schedule Resource that we are seeking a slot within
          identifier:
            type: string|integer
            required: false
            description: A Slot Identifier
          slot-type:
            required: false
            description: The type of appointments that can be booked into the slot
          start:
            required: false
            description: Appointment date/time

## API definition ##
/Patient:
  type: {
    fhirResourceType: {
      postExample: {
        "resourceType": "Patient",
        "address": [
          {
            "city": "San Francisco",
            "country": "United States of America",
            "line": [
              "499 Folsom Street"
            ],
            "postalCode": "90354",
            "state": "California"
          }
        ],
        "birthDate": "1970-02-12",
        "careProvider": [
          {
            "reference": "Practitioner/1"
          }
        ],
        "gender": "male",
        "name": [
          {
            "use": "official",
            "family": [
              "Radonctest"
            ],
            "given": [
              "Veera"
            ]
          }
        ],
        "telecom": [
          {
            "system": "phone",
            "use": "home",
            "value": "608-999-9005"
          }
        ]
      },
      getExample: {
        "resourceType": "Bundle",
        "type": "searchset",
        "link": [
          {
            "relation": "self",
            "url": "http://localhost:8081/hr-fhir-api/Patient"
          }
        ],
        "meta": {
          "lastUpdated": "2016-09-20T12:39:31.578Z"
        },
        "total": 2,
        "entry": [
          {
            "fullUrl": "http://localhost:8081/hr-fhir-api/Patient/13556258",
            "resource": {
              "resourceType": "Patient",
              "id": "13556258",
              "address": [
                {
                  "city": "San Francisco",
                  "country": "United States",
                  "line": [
                    "651 Bush Street"
                  ],
                  "postalCode": "94105",
                  "state": "California"
                }
              ],
              "birthDate": "1970-02-12",
              "careProvider": [
                {
                  "reference": "Practitioner/1"
                }
              ],
              "gender": "female",
              "name": [
                {
                  "use": "official",
                  "family": [
                    "Smith"
                  ],
                  "given": [
                    "Anna"
                  ]
                }
              ],
              "telecom": [
                {
                  "system": "phone",
                  "use": "home",
                  "value": "4152292009"
                }
              ]
            }
          },
          {
            "fullUrl": "http://localhost:8081/hr-fhir-api/Patient/2",
            "resource": {
              "resourceType": "Patient",
              "id": "2",
              "address": [
                {
                  "city": "San Francisco",
                  "country": "United States of America",
                  "line": [
                    "1855 Folsom Street"
                  ],
                  "postalCode": "53703",
                  "state": "Wisconsin"
                }
              ],
              "birthDate": "1979-04-13",
              "careProvider": [
                {
                  "reference": "Practitioner/1"
                }
              ],
              "gender": "female",
              "name": [
                {
                  "use": "official",
                  "family": [
                    "Radonctest"
                  ],
                  "given": [
                    "Veera"
                  ]
                }
              ],
              "telecom": [
                {
                  "system": "phone",
                  "use": "home",
                  "value": "608-999-9654"
                }
              ]
            }
          }
        ]
      }
    }
  }
  get:
    is: [ patientSearch ]
  put:
    is: [ patientSearch ]
  delete:
    is: [ patientSearch ]
  /_history:
    type: { fhirHistory: { bundleName: PatientBundle } }
    is: [ patientSearch ]
  /{id}:
    type: {
      fhirResource: {
        getSingleExample: {
          "resourceType": "Patient",
          "id": "9",
          "address": [
            {
              "city": "San Francisco",
              "country": "United States of America",
              "line": [
                "499 Folsom Street"
              ],
              "postalCode": "90354",
              "state": "California"
            }
          ],
          "birthDate": "1970-02-12",
          "careProvider": [
            {
              "reference": "Practitioner/1"
            }
          ],
          "gender": "male",
          "name": [
            {
              "use": "official",
              "family": [
                "Radonctest"
              ],
              "given": [
                "Veera"
              ]
            }
          ],
          "telecom": [
            {
              "system": "phone",
              "use": "home",
              "value": "608-999-9005"
            }
          ]
        },
        putExample: {
          "resourceType": "Patient",
          "id" : "9",
          "address": [
            {
              "city": "San Francisco",
              "country": "United States of America",
              "line": [
                "499 Folsom Street"
              ],
              "postalCode": "90354",
              "state": "California"
            }
          ],
          "birthDate": "1970-02-12",
          "careProvider": [
            {
              "reference": "Practitioner/1"
            }
          ],
          "gender": "male",
          "name": [
            {
              "use": "official",
              "family": [
                "Radonctest"
              ],
              "given": [
                "Veera"
              ]
            }
          ],
          "telecom": [
            {
              "system": "phone",
              "use": "home",
              "value": "608-999-9005"
            }
          ]
        }
      }
    }
    /_history:
      type: { fhirHistory: { bundleName: PatientBundle } }
    /{vid}:
      type: { fhirVersionedResource: { resourceName: Patient } }
    /Condition:
      type:  {
        fhirCompartment: {
          example: {
            "resourceType": "Bundle",
            "type": "searchset",
            "link": [
              {
                "relation": "self",
                "url": "http://localhost:8081/hr-fhir-api/Condition?patient=Patient%2F9"
              }
            ],
            "meta": {
              "lastUpdated": "2016-09-21T13:46:17.878Z"
            },
            "total": 5,
            "entry": [
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/Condition/1",
                "resource": {
                  "resourceType": "Condition",
                  "id": "1",
                  "patient": {
                    "reference": "Patient/9"
                  },
                  "asserter": {
                    "reference": "Patient/9",
                    "display": ""
                  },
                  "code": {
                    "coding": [
                      {
                        "code": "195967001",
                        "display": "Asthma",
                        "system": "http://snomed.info/sct"
                      }
                    ]
                  },
                  "verificationStatus": "confirmed",
                  "onsetDateTime": "2016-05-10"
                }
              },
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/Condition/2",
                "resource": {
                  "resourceType": "Condition",
                  "id": "2",
                  "patient": {
                    "reference": "Patient/9"
                  },
                  "asserter": {
                    "reference": "Patient/9",
                    "display": ""
                  },
                  "code": {
                    "coding": [
                      {
                        "code": "73211009",
                        "display": "Diabetes mellitus",
                        "system": "http://snomed.info/sct"
                      }
                    ]
                  },
                  "verificationStatus": "confirmed",
                  "onsetDateTime": "2016-05-11"
                }
              },
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/Condition/3",
                "resource": {
                  "resourceType": "Condition",
                  "id": "3",
                  "patient": {
                    "reference": "Patient/9"
                  },
                  "asserter": {
                    "reference": "Patient/9",
                    "display": ""
                  },
                  "code": {
                    "coding": [
                      {
                        "code": "38341003",
                        "display": "High Blood Pressure",
                        "system": "http://snomed.info/sct"
                      }
                    ]
                  },
                  "verificationStatus": "refuted",
                  "onsetDateTime": "2016-05-11"
                }
              },
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/Condition/4",
                "resource": {
                  "resourceType": "Condition",
                  "id": "4",
                  "patient": {
                    "reference": "Patient/9"
                  },
                  "asserter": {
                    "reference": "Patient/9",
                    "display": ""
                  },
                  "code": {
                    "coding": [
                      {
                        "code": "13644009",
                        "display": "High Cholesterol",
                        "system": "http://snomed.info/sct"
                      }
                    ]
                  },
                  "verificationStatus": "unknown",
                  "onsetDateTime": "2016-05-11"
                }
              },
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/Condition/5",
                "resource": {
                  "resourceType": "Condition",
                  "id": "5",
                  "patient": {
                    "reference": "Patient/9"
                  },
                  "asserter": {
                    "reference": "Patient/9",
                    "display": ""
                  },
                  "code": {
                    "coding": [
                      {
                        "code": "22298006",
                        "display": "Heart Attack",
                        "system": "http://snomed.info/sct"
                      }
                    ]
                  },
                  "verificationStatus": "unknown",
                  "onsetDateTime": "2016-05-11"
                }
              }
            ]
          }
        }
      }
      is: [ conditionSearch ]
    /Observation:
      type: {
        fhirCompartment: {
          example: {
            "resourceType": "Bundle",
            "type": "searchset",
            "link": [
              {
                "relation": "self",
                "url": "http://localhost:8081/hr-fhir-api/Observation"
              }
            ],
            "meta": {
              "lastUpdated": "2016-09-20T12:39:31.578Z"
            },
            "total": 1,
            "entry": [
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/Observation/1",
                "resource": {
                  "resourceType": "Observation",
                  "id": "455454",
                  "status": "final",
                  "category": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/observation-category",
                        "code": "vital-signs",
                        "display": "Vital Signs"
                      }
                    ]
                  },
                  "code": {
                    "coding": [
                      {
                        "system": "http://loinc.org",
                        "code": "3141-9",
                        "display": "Weight Measured"
                      },
                      {
                        "system": "http://snomed.info/sct",
                        "code": "27113001",
                        "display": "Body weight"
                      },
                      {
                        "system": "http://acme.org/devices/clinical-codes",
                        "code": "body-weight",
                        "display": "Body Weight"
                      }
                    ]
                  },
                  "subject": {
                    "reference": "Patient/5646546"
                  },
                  "encounter": {
                    "reference": "Encounter/654654"
                  },
                  "valueQuantity": {
                    "value": 185,
                    "unit": "lbs",
                    "system": "http://unitsofmeasure.org",
                    "code": "[lb_av]"
                  }
                }
              }
            ]
          }
        }
      }
      is: [ observationSearch ]
    /MedicationOrder:
      type: {
        fhirCompartment: {
          example: {
            "resourceType": "Bundle",
            "type": "searchset",
            "link": [
              {
                "relation": "self",
                "url": "http://localhost:8081/hr-fhir-api/MedicationOrder"
              }
            ],
            "meta": {
              "lastUpdated": "2016-09-20T12:39:31.578Z"
            },
            "total": 1,
            "entry": [
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/MedicationOrder/1",
                "resource": {
                  "resourceType": "MedicationOrder",
                  "identifier": ["value": "5245"],
                  "status": "active",
                  "patient": {
                    "reference": "Patient/1164365"
                  },
                  "prescriber": {
                    "reference": "Practitioner/3656"
                  },
                  "dosageInstruction": [
                    {
                      "text": "Take 3 mg by mouth Daily."
                    },
                    {
                      "doseQuantity": {
                        "value": "3",
                        "unit": "mg",
                        "system": "http://unitsofmeasure.org",
                        "code": "mg"
                      }
                    }
                  ],
                  "medicationCodeableConcept": {
                    "coding": [
                      {
                        "system": "Internal",
                        "code": "78064"
                      },
                      {
                        "system": "RxNorm",
                        "code": "679314"
                      }
                    ],
                    "text": "PALIPERIDONE ER 3 MG TABLET,EXTENDED RELEASE 24 HR"
                  },
                  "medication": {
                    "display": "paliperidone"
                  },
                  "reason": {
                    "display": "mania"
                  }
                }
              }
            ]
          }
        }
      }
      is: [ medicationOrderSearch ]
    /Appointment:
      type: {
        fhirCompartment: {
          example: {
            "resourceType": "Bundle",
            "type": "searchset",
            "link": [
              {
                "relation": "self",
                "url": "http://localhost:8081/hr-fhir-api/Appointment?patient=Patient%2F9"
              }
            ],
            "meta": {
              "lastUpdated": "2016-09-20T12:28:41.776Z"
            },
            "total": 7,
            "entry": [
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/Appointment/3",
                "resource": {
                  "resourceType": "Appointment",
                  "identifier": [{"value":"3"}],
                  "description": "",
                  "start": "2016-10-28T14:30:00+00:00",
                  "end": "2016-10-28T15:00:00+00:00",
                  "participant": [
                    {
                      "status": "accepted",
                      "actor": {
                        "reference": "Patient/9",
                        "display": "Andreas Anderson"
                      }
                    },
                    {
                      "status": "accepted",
                      "actor": {
                        "reference": "Practitioner/1",
                        "display": "Jamie Fletcher, MD"
                      }
                    }
                  ],
                  "status": "booked",
                  "slot": [
                    {
                      "reference": "Slot/15"
                    }
                  ]
                }
              },
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/Appointment/4",
                "resource": {
                  "resourceType": "Appointment",
                  "id": "4",
                  "description": "",
                  "start": "2016-10-28T15:00:00+00:00",
                  "end": "2016-10-28T15:30:00+00:00",
                  "participant": [
                    {
                      "status": "accepted",
                      "actor": {
                        "reference": "Patient/9",
                        "display": "Andreas Anderson"
                      }
                    },
                    {
                      "status": "accepted",
                      "actor": {
                        "reference": "Practitioner/1",
                        "display": "Jamie Fletcher, MD"
                      }
                    }
                  ],
                  "status": "booked",
                  "slot": [
                    {
                      "reference": "Slot/16"
                    }
                  ]
                }
              },
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/Appointment/5",
                "resource": {
                  "resourceType": "Appointment",
                  "id": "5",
                  "description": "",
                  "start": "2016-10-28T14:00:00+00:00",
                  "end": "2016-10-28T14:30:00+00:00",
                  "participant": [
                    {
                      "status": "accepted",
                      "actor": {
                        "reference": "Patient/9",
                        "display": "Andreas Anderson"
                      }
                    },
                    {
                      "status": "accepted",
                      "actor": {
                        "reference": "Practitioner/1",
                        "display": "Jamie Fletcher, MD"
                      }
                    }
                  ],
                  "status": "booked",
                  "slot": [
                    {
                      "reference": "Slot/14"
                    }
                  ]
                }
              },
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/Appointment/9",
                "resource": {
                  "resourceType": "Appointment",
                  "id": "9",
                  "description": "",
                  "start": "2016-09-12T16:30:00+00:00",
                  "end": "2016-09-12T17:00:00+00:00",
                  "participant": [
                    {
                      "status": "accepted",
                      "actor": {
                        "reference": "Patient/9",
                        "display": "Veera Radonctest"
                      }
                    },
                    {
                      "status": "accepted",
                      "actor": {
                        "reference": "Practitioner/1",
                        "display": "Jamie Fletcher, MD"
                      }
                    }
                  ],
                  "status": "booked",
                  "slot": [
                    {
                      "reference": "Slot/25"
                    }
                  ]
                }
              },
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/Appointment/10",
                "resource": {
                  "resourceType": "Appointment",
                  "id": "10",
                  "description": "",
                  "start": "2016-09-16T16:30:00+00:00",
                  "end": "2016-09-16T17:00:00+00:00",
                  "participant": [
                    {
                      "status": "accepted",
                      "actor": {
                        "reference": "Patient/9",
                        "display": "Veera Radonctest"
                      }
                    },
                    {
                      "status": "accepted",
                      "actor": {
                        "reference": "Practitioner/1",
                        "display": "Jamie Fletcher, MD"
                      }
                    }
                  ],
                  "status": "booked",
                  "slot": [
                    {
                      "reference": "Slot/23"
                    }
                  ]
                }
              },
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/Appointment/11",
                "resource": {
                  "resourceType": "Appointment",
                  "id": "11",
                  "description": "",
                  "start": "2016-09-14T16:30:00+00:00",
                  "end": "2016-09-14T17:00:00+00:00",
                  "participant": [
                    {
                      "status": "accepted",
                      "actor": {
                        "reference": "Patient/9",
                        "display": "Veera Radonctest"
                      }
                    },
                    {
                      "status": "accepted",
                      "actor": {
                        "reference": "Practitioner/1",
                        "display": "Jamie Fletcher, MD"
                      }
                    }
                  ],
                  "status": "booked",
                  "slot": [
                    {
                      "reference": "Slot/24"
                    }
                  ]
                }
              },
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/Appointment/14",
                "resource": {
                  "resourceType": "Appointment",
                  "id": "14",
                  "description": "",
                  "start": "2016-09-15T15:30:00+00:00",
                  "end": "2016-09-15T16:00:00+00:00",
                  "participant": [
                    {
                      "status": "accepted",
                      "actor": {
                        "reference": "Patient/9",
                        "display": "Veera Radonctest"
                      }
                    },
                    {
                      "status": "accepted",
                      "actor": {
                        "reference": "Practitioner/1",
                        "display": "Jamie Fletcher, MD"
                      }
                    }
                  ],
                  "status": "booked",
                  "slot": [
                    {
                      "reference": "Slot/21"
                    }
                  ]
                }
              }
            ]
          }
        }
      }
      is: [ appointmentSearch ]
    /AllergyIntolerance:
      type: {
        fhirCompartment: {
          example: {
            "resourceType": "Bundle",
            "type": "searchset",
            "link": [
              {
                "relation": "self",
                "url": "http://localhost:8081/hr-fhir-api/AllergyIntolerance?patient=Patient%2F9"
              }
            ],
            "meta": {
              "lastUpdated": "2016-09-20T12:25:15.712Z"
            },
            "total": 6,
            "entry": [
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/AllergyIntolerance/1",
                "resource": {
                  "resourceType": "AllergyIntolerance",
                  "id": "1",
                  "patient": {
                    "reference": "Patient/9"
                  },
                  "reporter": {
                    "reference": "Patient/9"
                  },
                  "substance": {
                    "coding": [
                      {
                        "display": "Peanuts"
                      }
                    ]
                  },
                  "recordedDate": "2016-05-11",
                  "status": "confirmed"
                }
              },
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/AllergyIntolerance/2",
                "resource": {
                  "resourceType": "AllergyIntolerance",
                  "id": "2",
                  "patient": {
                    "reference": "Patient/9"
                  },
                  "reporter": {
                    "reference": "Patient/9"
                  },
                  "substance": {
                    "coding": [
                      {
                        "display": "Aspirin"
                      }
                    ]
                  },
                  "recordedDate": "2016-05-11",
                  "status": "refuted"
                }
              },
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/AllergyIntolerance/3",
                "resource": {
                  "resourceType": "AllergyIntolerance",
                  "id": "3",
                  "patient": {
                    "reference": "Patient/9"
                  },
                  "reporter": {
                    "reference": "Patient/9"
                  },
                  "substance": {
                    "coding": [
                      {
                        "display": "Penicillin"
                      }
                    ]
                  },
                  "recordedDate": "2016-05-11",
                  "status": "unconfirmed"
                }
              },
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/AllergyIntolerance/4",
                "resource": {
                  "resourceType": "AllergyIntolerance",
                  "id": "4",
                  "patient": {
                    "reference": "Patient/9"
                  },
                  "reporter": {
                    "reference": "Patient/9"
                  },
                  "substance": {
                    "coding": [
                      {
                        "display": "Gluten"
                      }
                    ]
                  },
                  "recordedDate": "2016-05-11",
                  "status": "unconfirmed"
                }
              },
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/AllergyIntolerance/5",
                "resource": {
                  "resourceType": "AllergyIntolerance",
                  "id": "5",
                  "patient": {
                    "reference": "Patient/9"
                  },
                  "reporter": {
                    "reference": "Patient/9"
                  },
                  "substance": {
                    "coding": [
                      {
                        "display": "Dairy products"
                      }
                    ]
                  },
                  "recordedDate": "2016-05-11",
                  "status": "unconfirmed"
                }
              },
              {
                "fullUrl": "http://localhost:8081/hr-fhir-api/AllergyIntolerance/6",
                "resource": {
                  "resourceType": "AllergyIntolerance",
                  "id": "6",
                  "patient": {
                    "reference": "Patient/9"
                  },
                  "reporter": {
                    "reference": "Patient/9"
                  },
                  "substance": {
                    "coding": [
                      {
                        "display": "Morphine"
                      }
                    ]
                  },
                  "recordedDate": "2016-05-11",
                  "status": "unconfirmed"
                }
              }
            ]
          }
        }
      }
      is: [ allergyIntoleranceSearch ]
  /_search:
    type: { fhirSearch: { bundleName: PatientBundle } }
    get:
      is: [ patientSearch ]
    post:
      is: [ patientPOSTSearch ]
